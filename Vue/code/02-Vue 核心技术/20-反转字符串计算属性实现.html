<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>反转字符串计算属性实现</title>
    <script src="../js/vue.js"></script>
</head>

<body>

    <!-- 
    计算属性:
        1.什么是计算属性？
            使用Vue的原有属性，经过一系列的运算/计算，最终得到了一个全新的属性，叫做计算属性。
            Vue的原有属性：data对象当中的属性可以叫做Vue的原有属性。
            全新的属性：表示生成了一个新的属性，和data中的属性无关了。新的属性也有自己的属性名和属性值。
        2.计算属性怎么用？
            语法格式：需要一个新的配置项 conputed
                computed: {
                    //这是一个计算属性
                    计算属性1 ：{
                        // setter 和 getter方法。
                        // 当第一次读取计算属性1的值的时候，getter方法被自动调用。
                        // 后序就会到缓存里拿，直到该计算属性所关联的Vue原有属性的值发生变化时，getter方法会被重新调用
                        get(){
                        
                        },
                        // 当修改计算属性1的值的时候，setter方法被自动调用。
                        set(val){
                        
                        }
                    },
                    // 这是另一个计算属性
                    计算属性2 : {
                    },
                }
        3.计算属性的作用？
            代码得到了复用。代码更加便于维护。代码的执行效率高了。（不需要再data中定义属性）

        4.计算属性的简写(set不需要的时候)
            computed: {
                计算属性1(){
                    // getter方法的逻辑
                }
            }
    -->

    <div id="app">
        <h1>{{msg}}</h1>
        输入的信息：<input type="text" v-model="info"><br>
        <!-- 缓存机制，getter方法只调用了一次 -->
        反转后的信息：{{reverseInfo}}<br>
        反转后的信息：{{reverseInfo}}<br>
        反转后的信息：{{reverseInfo}}<br>
        反转后的信息：{{reverseInfo}}<br>
        反转后的信息：{{reverseInfo}}<br>
        <!-- {{hehe}}<br>
        {{hehe}}<br>
        {{hehe}}<br>
        {{hehe}}<br> -->
    </div>

    <script>
        const vm = new Vue({
            el: '#app',
            data: {
                msg: '计算属性-反转字符串案例',
                info: ''
            },
            methods: {

            },
            computed: {
                // 可以定义多个计算属性
                // 计算属性当中的this也是Vue实例 (箭头函数中的this和Vue实例不相等)
                hehe: {
                    get() {
                        console.log('getter');
                        console.log(this === vm);
                        return 'hehe';
                    },
                    setter(val) {
                        console.log('setter');
                        console.log(this === vm);
                    }
                },

                // 完整写法
                // reverseInfo: {
                //     get() {
                //         console.log('getter');
                //         return this.info.split('').reverse().join('');
                //     },
                //     set(val) {
                //         console.log('setter方法');
                //         // 不能这么做，这样做就递归了
                //         //this.reverseInfo = val;
                //         // 怎么修改计算属性呢？
                //         // 原理：计算属性的值变还是不变，取决于计算属性关联的Vue原始属性的值。
                //         // 也就是说：reverseInfo变还是不变，取决于info属性的值变不变。
                //         // 本质上：修改计算属性，实际上就是通过修改Vue的原始属性来了实现的。
                //         this.info = val.split('').reverse().join('');
                //     }
                // }


                // 简写
                reverseInfo(){
                    return this.info.split('').reverse().join('');
                }
            }
        })
    </script>
</body>

</html>